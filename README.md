# Electric Grid Simulation

A real-time smart grid simulation platform for visualizing India's high-voltage transmission network. The system loads infrastructure data from GeoJSON, builds a graph-based electrical grid, and serves it to a React + Leaflet dashboard that handles energization, sensor placement (sqrt(n) algorithm), fault injection, and fault identification entirely on the client side.

---

## Table of Contents

- [Overview](#overview)
- [Project Structure](#project-structure)
- [Prerequisites](#prerequisites)
- [Setup](#setup)
- [Running the Dashboard](#running-the-dashboard)
- [Data Files](#data-files)
- [Architecture](#architecture)

---

## Overview

The project consists of two parts:

1. **Data Pipeline** (Python) -- Reads a large GeoJSON file containing India's transmission infrastructure, builds a graph-based grid model, and exports a compact JSON file for the frontend.
2. **Dashboard** (React + Vite + Leaflet) -- A client-side web application that loads the exported grid data and runs a real-time simulation with interactive controls for energization, fault injection, and sensor monitoring.

---

## Project Structure

```
Electric_simulation/
|-- export_grid_data.py      # Python script to export grid data as JSON for the dashboard
|-- requirements.txt         # Python dependencies (networkx)
|-- .gitignore
|-- README.md
|
|-- core/                    # Python modules for data loading and grid construction
|   |-- __init__.py
|   |-- geojson_loader.py    # Loads and classifies features from GeoJSON files
|   |-- grid_builder.py      # Builds a NetworkX graph-based grid model
|
|-- dashboard/               # React + Vite + Leaflet frontend
|   |-- src/
|   |   |-- App.jsx
|   |   |-- main.jsx
|   |   |-- index.css
|   |   |-- components/
|   |   |   |-- MapView.jsx      # Leaflet map with grid overlay
|   |   |   |-- ControlPanel.jsx # Grid controls (energize, fault, sensors)
|   |   |   |-- SensorPanel.jsx  # Sensor status monitoring panel
|   |   |   |-- StatusBar.jsx    # Real-time grid status bar
|   |   |-- simulation/
|   |       |-- gridEngine.js    # Client-side grid simulation logic
|   |       |-- sensorEngine.js  # Client-side sensor placement and reading
|   |-- public/
|   |   |-- grid_data.json       # Pre-exported grid data (generated by export_grid_data.py)
|   |-- package.json
|   |-- vite.config.js
```

---

## Prerequisites

- **Python 3.9+** (only needed once, to export grid data)
- **Node.js 18+** and **npm**
- **GeoJSON data file** -- The data pipeline requires a GeoJSON file containing India's transmission infrastructure. This file is not included in the repository due to its size (~280 MB). See [Data Files](#data-files).

---

## Setup

### 1. Clone the Repository

```bash
git clone https://github.com/HEMANT2027/Electric_simulation.git
cd Electric_simulation
```

### 2. Install Python Dependencies

This is only needed if you want to regenerate the grid data JSON from a GeoJSON source file.

```bash
pip install -r requirements.txt
```

### 3. Install Dashboard Dependencies

```bash
cd dashboard
npm install
cd ..
```

---

## Running the Dashboard

### Step 1: Export Grid Data (one-time, or whenever you update the source GeoJSON)

This step reads the GeoJSON file, builds the grid, filters to the Delhi NCR region, and writes `dashboard/public/grid_data.json`.

```bash
python export_grid_data.py
```

If `grid_data.json` already exists in `dashboard/public/`, you can skip this step.

### Step 2: Start the Development Server

```bash
cd dashboard
npm run dev
```

The dashboard opens at `http://localhost:5173`.

### Dashboard Features

| Feature              | Description                                                    |
|---------------------|----------------------------------------------------------------|
| Interactive Map      | Leaflet map showing transmission lines, towers, and substations |
| Energize / De-energize | Toggle power flow across the grid                            |
| Fault Injection      | Click on a line or select from the control panel to trigger a fault |
| Sensor Placement     | Automatically places sensors using the sqrt(n) strategy        |
| Sensor Monitoring    | Real-time panel showing live vs dead sensor readings            |
| Fault Identification | Identifies the faulty block based on the last live / first dead sensor |
| Fault Isolation Mode | Hides non-faulted lines to focus on the affected area          |

### Production Build

To build a static production bundle:

```bash
cd dashboard
npm run build
```

The output goes to `dashboard/dist/` and can be served by any static file server.

---

## Data Files

The data pipeline requires a GeoJSON file exported from OpenStreetMap containing power infrastructure (towers, lines, substations, poles). This file is not included in the repository because it exceeds GitHub's size limits.

| File                                | Size    | Description                                   |
|------------------------------------|---------|-----------------------------------------------|
| `IndiaTransmission - Copy.geojson` | ~280 MB | Full India transmission data (used by `export_grid_data.py`) |

**How to obtain the data:**

1. Go to [Overpass Turbo](https://overpass-turbo.eu/)
2. Run a query for power infrastructure in India (towers, lines, substations)
3. Export the result as GeoJSON
4. Place the file in the project root directory

Alternatively, if `dashboard/public/grid_data.json` is already present (included in this repo), you can run the dashboard directly without the source GeoJSON.

---

## Architecture

```
GeoJSON File (280 MB)
        |
        v
  export_grid_data.py
  (Python: geojson_loader + grid_builder)
        |
        v
  grid_data.json (~2 MB)
        |
        v
  React Dashboard (client-side)
  |-- gridEngine.js    --> builds graph, energizes, injects faults
  |-- sensorEngine.js  --> places sensors, reads status, identifies faults
  |-- MapView.jsx      --> renders everything on Leaflet
  |-- ControlPanel.jsx --> user controls
  |-- SensorPanel.jsx  --> sensor readouts
```

The heavy computation (parsing 280 MB of GeoJSON, building the graph) happens once in Python. The resulting compact JSON is loaded by the React app, which handles all simulation logic in the browser with no backend required.

---

## License

This project is part of the Apparent Energy research initiative.

